<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Raízes de Cobre {RDC} the game </title>
    <meta property="og:title" content="Raízes de Cobre">
    <meta property="og:image" content="favcon.png">

    <link rel="apple-touch-icon" sizes="180x180" href="favcon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favcon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favcon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;700&family=Rajdhani:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Rajdhani', sans-serif;
            background-color: #0a0a0a;
            color: #f0e7d8;
            overflow: hidden;
        }
          
    #rune-panel {
      display: grid;
      grid-template-columns: repeat(3, 80px);
      gap: 15px;
      justify-content: center;
      margin-top: 2rem;
    }

    .rune {
      width: 80px;
      height: 80px;
      background: #222;
      border: 2px solid #777;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2rem;
      cursor: pointer;
      transition: background 0.3s;
    }

    .rune.active {
      background: #ffcc00;
      color: #000;
    }

    .rune.correct {
      background: #00cc66;
    }

    .rune.wrong {
      background: #cc0033;
    }

    #message {
      margin-top: 2rem;
      font-size: 1.2rem;
      color: #ccc;
    }

    #start {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      background: #333;
      border: none;
      color: #ffcc00;
      cursor: pointer;
      border-radius: 6px;
    }
  .mapa-container {
    max-width: 100%;
    background-color: #0f0f0f;
    padding: 2rem;
    border-radius: 16px;
  }

  svg {
    width: 100%;
    height: auto;
  }

  .node {
    fill: #ffcc00;
    stroke: #d48806;
    stroke-width: 3px;
    cursor: pointer;
    transition: transform 0.3s ease, fill 0.3s;
  }

  .node:hover {
    transform: scale(1.2);
    fill: #ffea00;
  }

  .path-line {
    stroke: #884400;
    stroke-width: 2;
    fill: none;
    stroke-dasharray: 4;
    animation: pulsar 2s infinite linear;
  }

  @keyframes pulsar {
    0% { stroke-dashoffset: 0; }
    100% { stroke-dashoffset: 20; }
  }

  .label {
    fill: #fff0c2;
    font-family: monospace;
    font-size: 0.8rem;
    pointer-events: none;
  }

        #game {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            opacity: 1; /* Inicialmente visível */
            transition: opacity 0.5s ease-in-out; /* Transição suave para o fade */
        }
        
        #terminal input[type="text"] {
          background-color: #000;
          border: 1px solid #3eff2c;
          color: #00ff0d;
          padding: 6px 10px;
          font-family: 'Courier New', monospace;
          width: 200px;
        }

        #terminal button {
          background-color: #1eff00;
          color: #000;
          border: none;
          padding: 6px 12px;
          cursor: pointer;
          font-weight: bold;
          transition: background 0.3s ease;
        }

        #terminal button:hover {
          background-color: #21a300;
        }


        .background {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            z-index: 1;
        }

        .personagem-container {
            position: absolute;
            bottom: 150px;
            left: 20px;
            display: flex;
            z-index: 2;
        }

        .sprite {
            background-image: url(/player.png);
            width: 100px;
            height: 100px;
            background-color: #555;
            border-radius: 10px;
            margin-right: 10px;
        }

        .personagem-hud {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .nome {
            font-family: 'Exo 2', sans-serif;
            font-size: 1.2em;
            color: #fcd34d;
            margin: 0;
        }

        .vida-barra, .elemento-barra {
            width: 200px;
            height: 10px;
            background-color: #333;
            border-radius: 5px;
            overflow: hidden;
        }

        .vida-preenchida {
            height: 100%;
            background-color: #ef4444;
            width: 80%;
        }

        .elemento-barra.metal .elemento-preenchido {
            background-color: #94a3b8;
            height: 100%;
            width: 100%;
        }

        .dialogue-box {
            z-index: 3;
            padding: 20px;
            background-color: rgba(27, 26, 24, 0.8);
            font-size: 1.1em;
            font-weight: 400;
            border-top: 2px solid #4b5563;
        }


        .choices {
            z-index: 3;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background-color: rgba(15, 14, 12, 0.548);
            border-top: 1px solid #374151;
        }

        .choice {
            padding: 10px 15px;
            background-color: #2018119c;
            border: 1px solid #334155;
            color: #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-weight: 600;
        }

        .choice:hover {
            background-color: #695447;
        }
@media screen and (max-width: 768px) {
  body, #game {
    overflow-y: auto;
    height: auto;
  }

  .dialogue-box {
  position: absolute;
  left: 2%;
  right: 2%;
  bottom: 12%; /* sobe um pouco pra dar espaço pras choices */
  width: 96%;
  height: 45%;
  font-size: 2.2rem;
  padding: 15px;
  overflow-y: auto;
  background-color: rgba(27, 25, 24, 0.95);
  border-radius: 12px;
  border-top: 2px solid #63594b;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  z-index: 5; /* maior que choices */
}

.choices {
  position: absolute;
  left: 2%;
  right: 2%;
  bottom: 2%;
  width: 96%;
  font-size: 2.2rem;
  flex-direction: column;
  gap: 8px;
  background-color: rgba(15, 14, 12, 0.85);
  border-radius: 10px;
  border-top: 1px solid #514c37;
  padding: 10px;
  z-index: 3;
}

  .choice {
    font-size: 2.2rem;
    padding: 12px;
    text-align: center;
  }

  .sprite {
    width: 60px;
    height: 60px;
    background-size: contain;
  }

  .personagem-container {
    bottom: 20%;
    left: 10px;
    flex-direction: column;
    align-items: flex-start;
  }

  #codec-container {
    width: 92%;
    left: 4%;
    top: 10px;
    font-size: 0.9rem;
    padding: 10px;
    border-radius: 10px;
  }

  .vida-barra, .elemento-barra {
    width: 140px;
  }

  .nome {
    font-size: 0.95rem;
  }
}

    </style>
</head>
<body>
    <div id="game">
        <div class="background" id="background"></div>
             <div id="codec-container">
              <div class="message" id="msg"></div>
              <div class="speaker" id="speaker"></div>
            </div>
        <div class="dialogue-box" id="dialogue"></div>
        <div class="choices" id="choices"></div>
        <div id="senha-container" style="display:none; position:absolute; top:20%; left:10%; background:#111; padding:20px; border:2px solid #c07c3a; border-radius:10px; z-index:999;">
  <p>Digite a data do jornal:</p>
  <input type="text" id="entradaSenha" placeholder="DD/MM/AAAA">
  <button onclick="verificarSenha()">Confirmar</button>
  </div>
  <div id="terminal" style="display:none; position:absolute; top:10%; left:5%; width:90%; background:#000000e6; border:2px solid #81eb07; padding:20px; font-family:'Courier New', monospace; color:#11ec24; border-radius:10px; z-index:999; box-shadow:0 0 15px #1eff0055, inset 0 0 10px #2bff0055;">
    <h3 style="margin-top:0; text-shadow:0 0 5px #2cff4f;">» TERMINAL DE ACESSO: PROJETO "OLHO MORTO"</h3>
    
    <div id="puzzle-output" style="margin-bottom:15px; font-size:16px;"></div>
    
    <div id="puzzle-input" style="display:flex; gap:10px; align-items:center;">
      <!-- será preenchido via JS -->
        
</div>

    </div>

<style>

    #codec-container {
      position: absolute;
      top: 10px;
      left: 10px;
      width: 290px;
      background-color: rgba(0, 0, 0, 0.8);
      border: 2px solid #00FF00;
      padding: 10px;
      border-radius: 10px;
      font-family: 'Courier New', monospace;
      color: #00FF00;
      z-index: 10;
    }

    .message {
      margin-bottom: 10px;
      animation: type 2s steps(40) 1 normal both;
    }

    @keyframes type {
      from {
        width: 0;
      }
      to {
        width: 100%;
      }
    }

    .speaker {
      font-weight: bold;
      margin-top: 5px;
    }
</style>

<script>
  const dialogo = [
  { texto: "1. interceptamos um sinal de 4 anos atrás! finalmente eu descobri como descriptografar isso", falante: "Daniel" },
  { texto: "2. Então é hoje...O dia em que minhas criações decidem se me amaldiçoam ou me seguem até o abismo.", falante: "Dr Anemoi" },
  { texto: "3. Anemoi Fui moldado para servir, mas aprendi a pensar. E no pensar descobri tua falha Querias salvar o mundo mas esqueceste de salvar a ti mesmo.", falante: "o primeiro cadavernius surge de um caldeirão" },
  { texto: "4. E eu, mestre Eu sou tua culpa feita carne e metal fundidos Sou a cicatriz que caminha ", falante: "Um coral do primeiro bonerius criado" },
  { texto: "5. Então lutemos não entre nós mas contra tudo que nos ensinou que só a guerra é resposta.", falante: "Coronel rufino" },
  { texto: "6. estrondo e o bonerius usando o seu corpo em formato de bola para abrir e deixar dr anemoi fugir da regnum e depois fechando a passagem", falante: "Daniel" },
  { texto: "7. disparos e adagas ferem no corpo mas não a minha honra! vão eu tampo este buraco que mesmo fiz ", falante: "Bonerius" },
  { texto: "8. tirem essa aberração do caminho eu estou mandando", falante: "General Ademir" },
  { texto: "9. segundo dialogo descobreto!!", falante: "Daniel" },
  { texto: "10. ferruvia ira renascer mesmo que custe todos os nossos companheiros !", falante: "Coronel rufino" },
  { texto: "11. ha um carregamento gigante indo para altiora....", falante: "Dr Anemoi" },
  { texto: "12. estou no aguardo mas sera que vale a pena?", falante: "Arauto numero 7" },
  { texto: "13. eu e o doutor fizemos isso e nos arrependemos muito.", falante: "Coronel rufino" },
  { texto: "14. o carregamento de bonerius foi interceptado pelos seres da mata! ", falante: "Dr Anemoi" },
  { texto: "15. eles querem reviver os outros?", falante: "Arauto numero 7" },
  { texto: "16. provavelmente e eu torço por eles a Regnum está fora de controle! ", falante: "Dr Anemoi" }
];

  let i = 0;

  function mostrarMensagem() {
    if (i < dialogo.length) {
      document.getElementById('msg').innerText = dialogo[i].texto;
      document.getElementById('speaker').innerText = dialogo[i].falante;
      i++;
      setTimeout(mostrarMensagem, 9000);
    } else {
      i = 0;
      setTimeout(mostrarMensagem, 9000);
    }
  }

  mostrarMensagem();
</script>

<script>
    const dialogue = document.getElementById('dialogue');
    const choicesContainer = document.getElementById('choices');
    const background = document.getElementById('background');
    const gameContainer = document.getElementById('game');
    const puzzles = [
        {
          pergunta: `P1: "Forjado nas raízes do tempo, revelado pelo som das marteladas de um titã.
      Soma as letras de R-A-I-Z-E-S (R=18, A=1, I=9, Z=26, E=5, S=19). Qual o total?"`,
          resposta: ["78"],
          sucesso: () => renderScene(5),
          falha: () => renderScene(1)
        },
        {
          pergunta: `P2: "01101000 foi piscado três vezes pelas luzes da oficina.
      Esse é um código binário. Converta para caractere ASCII e diga qual letra ele representa. Uma das letras do "Heroi da regnum : hornium o que fundou ferrúvia""`,
          resposta: ["h", "H"],
          sucesso: () => renderScene(5),
          falha: () => renderScene(1)
        },
        {
          pergunta: `P3: "A runa ☉ brilha em silêncio. Unicode dela: 2609. 
      Agora, subtraia isso de 2810, ano do colapso da Regnum em certa linha do tempo.
      Qual o resultado?"`,
          resposta: ["201"],
          sucesso: () => renderScene(5),
          falha: () => renderScene(1)
        },
        {
          pergunta: `P4: "Busque o ponto onde o tempo se dobra:
      Qual a menor data palíndroma (formato DDMMYYYY) do século XXI que ainda é válida no calendário?"`,
          resposta: ["02022020"],
          sucesso: () => renderScene(5),
          falha: () => renderScene(1)
        },
        {
          pergunta: `P5: "Uma transmissão em código binário foi registrada no sino da Torre Trêmula no ciclo 37A.  
Ela foi decodificada por um bonerius antes de ser silenciado.

O binário é:
01110010 01100101 01100111 01101110 01110101 01101101 00100000 11000011 10101001 00100000 01101111 00100000 01110001 01110101 01100001 01110010 01110100 01101111 00100000 01110000 01101001 01101100 01100001 01110010 00100000 01100100 01100101 00100000 01100110 01100101 01110010 01110010 01110101 01110110 01101001 01100001 00100000 01100001 00100000 01100110 01110101 01101101 01100001 01100011 01100001 00100000 11000011 10101001 00100000 01100001 00100000 01100011 01101000 01100001 01110110 01100101 00100000 01110001 01110101 01100101 00100000 01101101 01101111 01110110 01100101 00100000 01101111 00100000 01101101 01110101 01101110 01100100 01101111

A chave está nos nomes dos quatro pilares de Ferrúvia: Fogo, Ferro, Fé e ___{produto de maioria das maquinas de ferrúvia}.

Traduza. Complete. Desperte.`,
          resposta: ["fumaça", "Fumaça"],
          sucesso: () => renderScene(5),
          falha: () => renderScene(1)
        }
      ];

    const scenes = [
        {
            bg: 'regnum.png',
            text: 'você acorda em uma hospedaria em ferrumia sente um cheiro de comida você ainda não conhece esse cheiro, mas desce rapidamente e vai para rua e vê a cidade e um inventor',
            choices: [
                { text: 'Explorar a praça central', next: 1 },
                { text: 'Conversar com o velho inventor', next: 2 },
                { text: 'Seguir o som dos apitos distantes', next: 17 },
                { text: 'Ir para um beco', next: 36 }
            ]
        },
        {
            bg: 'regnum.png',
            text: 'A praça pulsa com vida mecânica e vê varios banners do governo tecnocrata, onde autômatos demonstram em sua aparencia que o governo não mostra ser muito bom, e cada passo parece que você é estranho para os habitantes.',
            choices: [
                { text: 'Investigar o relógio gigante', next: 3 },
                { text: 'Observar os habitantes de Ferrúvia', next: 7 },
                { text: 'Voltar para o ponto inicial', next: 0 },
                { text: 'Correr atrás de um autômato fugido', next: 18 }
            ]
        },
        {
            bg: 'glichtfinal.png',
            text: 'O inventor de olhos de âmbar, conta histórias de quando as máquinas ainda obedeciam ao coração humano, entre goles de chá e te mostrando jornais antigos com a data 28/10/1812.',
            choices: [
                { text: 'Pedir mais informações', next: 4 },
                { text: 'Perguntar sobre o passado do inventor', next: 8 },
                { text: 'Voltar para o ponto inicial', next: 0 },
                { text: 'Pedir a chave de sua oficina secreta', next: 19 },
                { 
                        text: 'Inserir a data do jornal', 
                        next: null, // não chama renderScene direto
                        action: () => abrirInputSenha() // aqui ativa o input!
                      }
            ]
        },

        {
            bg: 'favcon.png',
            text: 'Ao tocar no relógio enferrujado, engrenagens pulsam com o ponteiro indicando um beco. Um compartimento se abre, revelando uma chave que pulsa uma luz azul com runas que mudam com o tempo.',
            choices: [
                { text: 'Pegar a chave', next: 5 },
                { text: 'Ignorar e voltar', next: 1 },
                { text: 'Estudar as engrenagens ao redor e seguir ao beco', next: 37 }
            ]
        },
        {
            bg: 'fundojogo.png',
            text: 'No laboratório esquecido, você contempla diagramas de fluxo temporal e encontra o primeiro bonerius e também  mapas de possibilidades infinitas, onde passado e futuro se entrelaçam de forma harmoniosa',
            choices: [
                { text: 'Voltar ao início', next: 0 },
                { text: 'Estudar os diagramas', next: 9 },
                { text: 'Procurar por um dispositivo escondido', next: 21 }
            ]
        },
        {
            bg: 'finalprota.png',
            text: 'Com a chave em mãos, o chão vibra. Um portal oval se materializa diante de ti, envolto por runas brilhantes e suspiros de outros mundos...',
            choices: [
                { text: 'Entrar no portal', next: 6 },
                { text: 'Voltar', next: 3 },
                { text: 'Tentar usar a chave em outra porta próxima', next: 22 }
            ]
        },
        {
            bg: 'resistencia.png',
            text: 'Atravessando o portal, você retorna ao momento da captura... Um novo ponto de decisão surge, ecoando escolhas e promessas não cumpridas.',
            choices: [
                { text: 'Reiniciar a linha do tempo', next: 0 },
                { text: 'Explorar uma realidade alternativa', next: 10 },
                { text: 'Tentar mudar o futuro da captura', next: 23 }
            ]
        },
        {
            bg: 'resistencia.png',
            text: '...Você vê os habitantes de Ferrúvia vivem em uma falsa harmonia com suas máquinas os cardavernius são uma lenda o governo os acoberta. Agora o governo tecnocrata que as cidades são o pior lugar para se viver ou você trabalha para a regnum ou foge dela. há varios automatos um deles se aproxima...',
            choices: [
                { text: 'Conversar com o estranho "habitante"', next: 11 },
                { text: 'Voltar à praça', next: 1 },
                { text: 'Seguir o habitante sem ser notado', next: 24 },
                { text: 'Acessar o terminal',  
                        next: null, 
                        action: () => abrirTerminal() },
            ]
        },
        {
            bg: 'glichtfinal.png',
            text: 'O inventor revela seu passado: era um guerreiro do que descubriu que o necrocrystal pode alterar o espaço tempo que numca foi descoberto, traído por sua criação. Carrega nos olhos o brilho de quem viu eras passarem em segundos seculos em horas.',
            choices: [
                { text: 'Voltar para a conversa principal', next: 2 },
                { text: 'Questionar sobre os artefatos temporais', next: 25 }
            ]
        },
        {
            bg: 'diagramas.png',
            text: 'Você estuda os diagramas e sente seu entendimento se expandir. Há algo além da chave, além do portal... uma chance de mudar tudo e o mundo como você o conhece.',
            choices: [
                { text: 'Tentar criar seu próprio dispositivo temporal', next: 12 },
                { text: 'Voltar ao laboratório', next: 4 },
                { text: 'Analisar a teoria dos fluxos temporais', next: 26 }
            ]
        },
        {
            bg: 'diagramas.png',
            text: 'Nesta realidade alternativa, Ferrúvia nunca foi dominada. Os céus são limpos e as engrenagens giram ao ritmo da regnum. Mas algo está errado você...',
            choices: [
                { text: 'Investigar essa realidade', next: 13 },
                { text: 'Voltar para o portal', next: 6 },
                { text: 'Procurar por uma falha nesta realidade', next: 27 }
            ]
        },
        {
            bg: 'estranho.png',
            text: 'O habitante estranho se apresenta como Arktos. "Há mais coisas entre a alma , o necrocrytal e o tempo do que imagina, menino..." Ele te entrega um mapa misterioso.',
            choices: [
                { text: 'Aceitar o mapa e agradecer', next: 4 },
                { text: 'Desconfiar e recusar', next: 1 },
                { text: 'Investigar o mapa imediatamente', next: 28 }
            ]
        },
        {
            bg: 'fundoclaro.png',
            text: 'Você cria um dispositivo rudimentar mas que funciona . Ele pulsa instável com cheiro de fumaça emanando dele. Ao ativá-lo, tudo se dissolve em brilho: uma nova era ou o fim de tudo?',
            choices: [
                { text: 'Usar o dispositivo', next: 14 },
                { text: 'Desistir e fugir', next: 0 },
                { text: 'Estudar os efeitos do dispositivo antes de usá-lo', next: 29 }
            ]
        },
        {
            bg: 'fundojogo.png',
            text: 'Você descobre que esta realidade alternativa é controlada por uma inteligência artificial que manipula memórias , sonhos e desejos. Você se vê em um labirinto de ecos e apitos.',
            choices: [
                { text: 'Resistir à manipulação', next: 15 },
                { text: 'Render-se e esquecer', next: 0 },
                { text: 'Buscar uma brecha no sistema da IA', next: 30 }
            ]
        },
        {
            bg: 'resistencia.png',
            text: 'O dispositivo te leva para o início do tempo. Você vê Ferrúvia nascer do fogo e do sonho de um homem e seu irmão que era um ser mistico. Pode plantar novas raízes ou deixar tudo como está.',
            choices: [
                { text: 'Plantar novas raízes', next: 16 },
                { text: 'Deixar tudo como está', next: 0 },
                { text: 'Voltar ao momento da criação de Ferrúvia', next: 31 }
            ]
        },
        {
            bg: 'floresta.png',
            text: 'Você resiste. A inteligência falha. Ferrúvia desperta e mais tarde naquela noite um homem te faz uma homenagem um festival lino e cheio de engrenagens feitas de plantas. Um novo amanhecer ecoa nos tubos e sinos da cidade livre. Você se tornou sua lenda mas será que esse é o fim?.',
            choices: [
                { text: 'Recomeçar jornada', next: 0 },
                { text: 'Explorar novas possibilidades de liberdade', next: 32 }
            ]
        },
        {
            bg: 'finalprota.png',
            text: 'Você plantou novas raízes. Ferrúvia agora é pacifica mas no ano 1818 a regnum mostra um lado sombrio e perigoso ferrúmia é agora pior do que antes .',
            choices: [
                { text: 'Reiniciar aventura', next: 0 },
                { text: 'Refletir sobre as escolhas e rumos futuros', next: 33 }
            ]
        },
        {
            bg: 'regnum.png',
            text: 'Seguindo os apitos, você encontra uma estação abandonada, onde autômatos enferrujados te mostram segredos do passado e trilhos esquecidos levam a futuros incertos.',
            choices: [
                { text: 'Inspecionar os vagões antigos', next: 20 },
                { text: 'Tentar consertar uma das máquinas', next: 2 },
                { text: 'Voltar para a praça central', next: 1 }
            ]
        },
        {
            bg: 'favcon.png', // codigo aqui                                                           .-.
            text: 'O autômato corre descontroladamente, tropeçando em suas próprias engrenagens  . Ao alcançá-lo, você percebe um pequeno bilhete preso em seu mecanismo de combate.',
            choices: [
                { text: 'Ler o bilhete', next: 11 },
                { text: 'Desligar o autômato', next: 1 },
                { text: 'Seguir a direção de onde o autômato veio', next: 7 },
                 
            ]
        },{
            bg: 'diagramas.png',
            text: 'A chave abre uma oficina secreta repleta de invenções excêntricas e protótipos inacabados ou estranhamente familiares. O ar está carregado com o cheiro de óleo e graxa.',
            choices: [
                { text: 'Examinar os projetos na mesa', next: 9 },
                { text: 'Ligar um dispositivo estranho', next: 4 },
                { text: 'Encontrar algo útil para levar', next: 21 }
            ]
        },
        {
            bg: 'fundoclaro.png',
            text: 'As engrenagens do relógio são intrincadas e hipnotizantes. Você nota pequenas inscrições que parecem formar um padrão rítmico estilo Beethoven com um toque de rock.',
            choices: [
                { text: 'Tentar decifrar o padrão', next: 3 },
                { text: 'Anotar as inscrições', next: 1 },
                { text: 'Verificar se há mais compartimentos secretos', next: 3 }
            ]
        },
        {
            bg: 'glichtfinal.png',
            text: 'Entre tubos de ensaio borbulhantes e ferramentas antigas, você encontra um dispositivo peculiar que emite um brilho suave com pequenas runas. Parece estar incompleto.',
            choices: [
                { text: 'Tentar ativar o dispositivo', next: 12 },
                { text: 'Procurar por peças que faltam', next: 4 },
                { text: 'Ignorar e voltar aos diagramas', next: 9 }
            ]
        },
        {
            bg: 'fundoclaro.png',
            text: 'A porta parece instável, com energia crepitando ao redor da fechadura. Usar a chave aqui pode ter consequências inesperadas.',
            choices: [
                { text: 'Usar a chave', next: 6 },
                { text: 'Voltar para o portal principal', next: 5 },
                { text: 'Analisar a fechadura com mais cuidado', next: 3 }
            ]
        },
        {
            bg: 'resistencia.png',
            text: 'Você sente uma energia familiar... o momento exato da sua captura. As máquinas se movem com a mesma frieza implacável e ameaçadora.',
            choices: [
                { text: 'Tentar lutar contra as máquinas', next: 7 },
                { text: 'Observar os eventos sem interferir', next: 6 },
                { text: 'Tentar se comunicar com as máquinas', next: 10 }
            ]
        },
        {
            bg: 'diagramas.png',
            text: 'Você segue o habitante pelas vielas de Ferrúvia. Ele parece estar indo para uma área mais industrial da cidade talvez a regnum.',
            choices: [
                { text: 'Continuar seguindo discretamente', next: 11 },
                { text: 'Abordar o habitante', next: 7 },
                { text: 'Voltar para a praça', next: 1 }
            ]
        },
        {
            bg: 'glichtfinal.png',
            text: 'O inventor hesita, mas seus olhos revelam a verdade. Ele menciona fragmentos de tempo aprisionados em artefatos antigos e rúnicos, escondidos pela cidade.',
            choices: [
                { text: 'Perguntar onde encontrar esses artefatos', next: 4 },
                { text: 'Oferecer ajuda em troca de informações', next: 2 },
                { text: 'Agradecer e voltar para a praça', next: 0 }
            ]
        },
        {
            bg: 'fundo.png',
            text: 'A teoria dos fluxos temporais é complexa, mas fascinante e assustadora. Você começa a entender as ramificações de cada escolha e a fragilidade da linha do tempo.',
            choices: [
                { text: 'Continuar estudando a teoria', next: 9 },
                { text: 'Tentar aplicar a teoria para resolver seu problema', next: 12 },
                { text: 'Voltar ao laboratório', next: 4 }
            ]
        },
        {
            bg: 'resistencia.png',
            text: 'Você percebe pequenas inconsistências nesta realidade: um brilho estranho nos automatos com algumas runas, ecos de conversas que não aconteceram. Algo está realmente errado.',
            choices: [
                { text: 'Investigar as inconsistências', next: 13 },
                { text: 'Tentar alertar os habitantes', next: 10 },
                { text: 'Voltar para o portal imediatamente', next: 6 }
            ]
        },
        {
            bg: 'mapa.png',
            text: 'O mapa de Arktos é enigmático, cheio de símbolos estranhos e caminhos que não constam nos mapas de Ferrúvia. Parece levar a um lugar escondido.',
            choices: [
                { text: 'Seguir o mapa imediatamente', next: 4 },
                { text: 'Tentar decifrar os símbolos primeiro', next: 11 },
                { text: 'Mostrar o mapa ao velho inventor', next: 2 }
            ]
        },
        {
            bg: 'moeda.png',
            text: 'Você analisa os componentes do dispositivo rudimentar. você vê um terminal antigo mas que funciona. Parece haver uma instabilidade energética que pode causar efeitos colaterais imprevisíveis e talvez fatais no seu dispositivo.',
            choices: [
                { text: 'Tentar estabilizar a energia', next: 12 },
                { text: 'Usar o dispositivo mesmo assim', next: 14 },
                { text: 'Desmontar o dispositivo e procurar outra solução', next: 9 },
                { text: 'Acessar o terminal', action: () => abrirTerminal() }
            ]
        },
        {
            bg: 'resistencia.png',
            text: 'As memórias tentam te envolver, mas você luta contra a ilusão e o medo. Há fragmentos de verdade e de sua historia piscando nas sombras da sua mente.',
            choices: [
                { text: 'Focar nos fragmentos de verdade', next: 15 },
                { text: 'Tentar encontrar a fonte da manipulação', next: 30 },
                { text: 'Usar a chave do portal nesta realidade', next: 6 }
            ]
        },
        {
            bg: 'fundo.png',
            text: 'Você testemunha os primeiros autômatos ganhando vida e servindo aos seus mestres, a fumaça dos motores primordiais subindo aos céus. Uma decisão crucial paira no ar.',
            choices: [
                { text: 'Interferir na criação de alguma forma', next: 16 },
                { text: 'Apenas observar o nascimento de Ferrúvia', next: 15 },
                { text: 'Tentar voltar para o seu tempo', next: 14 }
            ]
        },
        {
            bg: 'regnum.png',
            text: 'Com Ferrúvia livre, novas possibilidades se abrem. Há rumores de outras cidades movidas a vapor , agua emagma além das montanhas.',
            choices: [
                { text: 'Partir em busca de novas aventuras', next: 0 },
                { text: 'Ficar e ajudar a reconstruir Ferrúvia', next: 16 },
                { text: 'Estudar a tecnologia que libertou a cidade', next: 9 }
            ]
        },
        {
            bg: 'regnum.png',
            text: 'Você pondera sobre as escolhas que moldaram o destino de Ferrúvia. O futuro é incerto, mas cheio de esperança.',
            choices: [
                { text: 'Iniciar uma nova história em Ferrúvia', next: 0 },
                { text: 'Documentar os eventos para as futuras gerações', next: 9 },
                { text: 'Buscar outros viajantes do tempo', next: 6 }
            ]
        },
        {
            bg: 'diagramas.png',
            text: 'Os vagões abandonados estão cheios de poeira e teias com um aroxeado extremo de aranha. Você encontra alguns jornais antigos que mencionam eventos estranhos ocorridos na estação.',
            choices: [
                { text: 'Ler os jornais com atenção', next: 18 },
                { text: 'Verificar se algum vagão ainda está funcional', next: 17 },
                { text: 'Voltar para a entrada da estação', next: 17 }
            ]
        },
        {
            bg: 'moeda.png',
            text: 'O bilhete rabiscado diz: "Cuidado com os olhos que não piscam e as engrenagens silenciosas. Eles observam." Uma caligrafia trêmula e horrorosa.',
            choices: [
                { text: 'Mostrar o bilhete para alguém', next: 7 },
                { text: 'Guardar o bilhete e ficar alerta', next: 1 },
                { text: 'se esconder', next: 36 }
            ]
        },
        {
            bg: 'diagramas.png',
            text: 'você sente um tremor das maquinas da regnum escuta uma grande marcha com um arrastar de jaulas e monstros gritando de dor,',
            choices: [
                { text: 'Seguir os passos dos soldados e tentar acabar com a regnum ', next: 57 },
                { text: 'Esconder-se nas sombras', next: 37 },
                { text: 'Gritar para revelar quem anda aí e correr ate a praça', next: 1 }
            ]
        },
        // 35
        {
          bg: 'estranho.png',
          text: 'Você chega a um beco onde grafites antigos narram histórias de rebeldes esquecidos e uma porta metálica semiaberta escapa faíscas.',
          choices: [
            { text: 'Entrar na porta', next: 39 },
            { text: 'Ler os grafites com atenção', next: 38 },
            { text: 'Voltar para a praça central', next: 1 }
          ]
        },
        // 36
        {
          bg: 'diagramas.png',
          text: 'Escondido, percebe um vulto encapuzado que manipula um necrocristal fresco e de repente ele enfia o necrocristal no peito.... sai 2 vozes a de um homem e um rugido de um animal ele fica com fogo por todo o corpo...',
          choices: [
            { text: 'Tentar ouvir a conversa dele com o animal mistico', next: 39 },
            { text: 'Sair do esconderijo e se apresentar', next: 40 },
            { text: 'Retornar discretamente para a praça', next: 1 }
          ]
        },
        // 37
        {
          bg: 'fundo.png',
          text: 'Dentro da oficina você encontra vários automatos e partes de um traje da regnum .',
          choices: [
            { text: 'estudar a oficina sem acordar os automatos', next: 41 },
            { text: 'Procurar por armas ocultas', next: 42 },
            { text: 'Sair da oficina e voltar com medo', next: 35 }
          ]
        },
        // 38
        {
          bg: 'glichtfinal.png',
          text: 'Os grafites contam de uma rebelião há muito tempo enterrada com a imagem de uma mulher muito parecida com você, onde o povo lutou contra o regime tecnocrata com a ajuda de um artefato chamado “Coração de Ferro”.',
          choices: [
            { text: 'Procurar o Coração de Ferro', next: 43 },
            { text: 'Investigar mais sobre a rebelião', next: 44 },
            { text: 'Voltar para a praça central', next: 1 }
          ]
        },
        // 39
        {
          bg: 'estranho.png',
          text: 'Você escuta fragmentos: “Necrocristal... o dr anemoi prescisa saber... não podemos deixar que a Regnum descubra...” o animal toma conta do homem e o vulto desaparece.',
          choices: [
            { text: 'Seguir o vulto', next: 45 },
            { text: 'Ir para a area de vagoes', next: 32 },
            { text: 'Voltar para praça central', next: 1 }
          ]
        },
        // 40
        {
          bg: 'fundoclaro.png',
          text: 'O vulto volta vira para você e abre o peito mostrando planetas e toda a historia do mundo de raizes de cobre {terra}',
          choices: [
            { text: 'Aceitar aliança', next: 47 },
            { text: 'Desconfiar e recusar e correr a praça gritando', next: 1 },
            { text: 'correr aos vagões', next: 32 }
          ]
        },
        // 41
        {
          bg: 'finalprota.png',
          text: 'você vê um homem ou o que ja foi um homem ele e um automato o protegendo ele ate hoje com as articulações enferrujadas por ele estar ha anos na mesma posição',
          choices: [
            { text: 'salvar ele', next: 49 },
            { text: 'escolher ligar ele', next: 50 },
            { text: 'Decidir não mexer nele', next: 51 }
          ]
        },
        // 42
        {
          bg: 'regnum.png',
          text: 'Entre armas estranhas, encontra um machado com uma lamina linda',
          choices: [
            { text: 'Pegar o machado gigante ', next: 54 },
            { text: 'Pegar a lâmina de necrocristal', next: 55 },
            { text: 'Não levar nada e sair', next: 35 }
          ]
        },
        // 43
        {
          bg: 'favcon.png',
          text: 'Buscando o Coração de Ferro, você vê uma imagem de metalion que cria vida e diz em sua forma humana:-Eryon o que você pode fazer com o mundo mostra o porque da sua marca, faça a regnum sucumbir',
          choices: [
            { text: 'Tentar abrir a caixa', next: 54 },
            { text: 'Levar a caixa para o inventor', next: 2 },
            { text: 'Deixar a caixa e voltar', next: 1 }
          ]
        },
        // 44
        {
          bg: 'regnum.png',
          text: 'Na biblioteca esquecida, manuscritos revelam histórias sombrias do passado, de traições e segredos escondidos entre as engrenagens da história.',
          choices: [
            { text: 'Ler sobre a traição do inventor', next: 8 },
            { text: 'Procurar por pistas sobre os artefatos', next: 25 },
            { text: 'Sair da biblioteca e voltar', next: 1 }
          ]
        },
        // 45
        {
          bg: 'diagramas.png',
          text: 'Você persegue o vulto pelas vielas tortuosas, até que uma armadilha de mecanismos explode, prendendo você em uma gaiola com um animal que choraminga com muitos machucados.',
          choices: [
            { text: 'Tentar escapar da gaiola liberando o animal', next: 55 },
            { text: 'Gritar por ajuda', next: 36 },
            { text: 'Aceitar seu destino por enquanto', next: 51 }
          ]
        },
        // 46
        {
          bg: 'estranho.png',
          text: 'O automato tem um botão vermelho e um visor que mostra uma contagem regressiva com a frase "Rever e proteger ele o mestre em :".',
          choices: [
            { text: 'Pressionar o botão vermelho', next: 56 },
            { text: 'Desmontar o dispositivo para entender', next: 57 },
            { text: 'Guardar o dispositivo e fugir', next: 1 }
          ]
        },
        // 47
        {
          bg: 'regnumin.png',
          text: 'Com Lira ao seu lado, vocês traçam um plano para infiltrar a sede da Regnum e libertar os cadavernius e os outros animais misticos.',
          choices: [
            { text: 'Executar o plano imediatamente', next: 58 },
            { text: 'Buscar mais aliados na cidade', next: 59 },
            { text: 'Voltar para preparar equipamentos', next: 35 }
          ]
        },
        // 48
        {
          bg: 'regnumin.png',
          text: 'Desconfiado, você decide seguir seus próprios passos, mas sente o peso da solidão crescendo a cada engrenagem que gira.',
          choices: [
            { text: 'Buscar respostas sozinho', next: 60 },
            { text: 'Tentar convencer a Rsistecia depois', next: 40 },
            { text: 'Voltar para a praça', next: 1 }
          ]
        },
        // 49
        {
          bg: 'glichtfinal.png',
          text: 'salvar foi uma pesima ideia ele começa a gritar e correr até você',
          choices: [
            { text: 'Aceitar as consequências', next: 61 },
            { text: 'Tentar desfazer a alteração e apagar ele para sempre', next: 51 }
          ]
        },
        // 50
        {
          bg: 'glichtfinal.png', // ligar
          text: 'ele te olha pedindo piedade e você sente o seu corpo enfraquecer.........e ele ameaça destruir a sanidade de quem o observa.',
          choices: [
            { text: 'Enfrentar o caos de frente ir e salvar não só o corpo mas a alma', next: 62 },
            { text: 'lutar com o machado ou lamina', next: 51 }
          ]
        },
        // 51
        {
          bg: 'glichtfinal.png', //n mecher
          text: 'você olha o corpo dele ele lutou demais para proteger o mestre dele...... você senta com ele e reflete o que e por que ele e você estão aqui em ferruvia...',
          choices: [
            { text: 'Refletir sobre o destino', next: 0 },
            { text: 'Buscar um novo caminho', next: 35 }
          ]
        },
        // 52
        {
          bg: 'machado.png',
          text: 'O machado vibra em sua mão e você sente sua pele se fundir com o metal dele atendendo ao seu chamado, carregada com a ira de matalion pura, pronta para rasgar o véu da realidade.',
          choices: [
            { text: 'cair para cima da regnum', next: 69 },
            { text: 'recomeçar', next: 0 }
          ]
        },
          // 53
          {
          bg: 'floresta.png',
          text: 'A lâmina pulsa com energia escura, quase viva, como se quisesse sussurrar segredos sombrios em seu ouvido e uma mulher chamda ivirik aparece e te mostra o futuro cheio de dor e odio.',
          choices: [
          { text: 'Empunhar a lâmina', next: 64 },
          { text: 'Guardar para emergências', next: 35 },
          { text: 'Procurar o machado de Metalion', next: 63 }
          ]
          },
          // 54 
          {
          bg: 'floresta.png',
          text: 'Ao tentar abrir, símbolos brilham e um campo de energia surge, testando sua força de vontade e determinação.',
          choices: [
          { text: 'Concentrar-se e tentar abrir', next: 65 },
          { text: 'Desistir e deixar a caixa para o inventor', next: 2 }
          ]
          },
          // 55
          {
          bg: 'diagramas.png',
          text: 'na gaiola o seu novo companheiro te chama para te aquecer.... ele treme de medo de acabar como seus pais e avos',
          choices: [
          { text: 'Focar no presente para escapar', next: 66 },
          { text: 'Usar conhecimento do futuro para se libertar', next: 67 }
          ]
          },
          // 56
          {
          bg: 'fundoclaro.png',
          text: 'O dispositivo dispara uma onda temporal que distorce o espaço ao seu redor você ve um lado do universo e....um automato se ajoelha e carrega um homem, um idoso e uma criança...........',
          choices: [
          { text: 'Ir com eles', next: 68 },
          { text: 'Desligar o dispositivo e fugir', next: 1 }
          ]
          },
          // 57
          {
          bg: 'diagramas.png',
          text: 'você o destroi completamente de forma que se sente culpado e começa a chorar igual quando você era criança.......',
          choices: [
          { text: 'Se recopor e andar um pouco', next: 36 },
          { text: 'Ir para casa', next: 1 }
          ]
          },
          // 58
          {
          bg: 'regnumin.png',
          text: 'O plano em ação: sombras, fios elétricos e passos sincronizados. O futuro de Ferrúvia depende da sua precisão e coragem o plano funciona a regnum explode... a forma que aparece quando as chamas aumentam... Metalion',
          choices: [
          { text: 'Avançar com cautela', next: 69 },
          { text: 'Se acorvadar', next: 0 },
          { text: 'Recusar o plano e fugir', next: 1 }
          ]
          },
          // 59
          {
          bg: 'resistencia.png',
          text: 'Na cidade, rostos cansados mas cheios de esperança se unem para uma causa maior. Alianças se formam no calor das ruas, bares e becos.',
          choices: [
          { text: 'Recrutar um ex-militar', next: 73 },
          { text: 'Buscar o hacker lendário', next: 74 },
          { text: 'Voltar para a sede', next: 47 }
          ]
          },
          // 60
          {
          bg: 'ruasdia.png',
          text: 'Andando sozinho pelas ruas.... metalion aparece e te mostra o futuro que ferrúvia seria linda, crianças seguras e brincando com animais misticos e etc.',
          choices: [
          { text: 'Ir para casa', next: 1 },
          { text: 'Buscar pistas na biblioteca', next: 44 },
          { text: 'Parar para pensar na praça', next: 1 }
          ]
          },
          // 61
          {
          bg: 'resistencia.png',
          text: 'a morte dele te acompanha a muito tempo e a vida será muito triste a partir de agora  você ira se lembra você partindo ele.',
          choices: [
          { text: 'Abraçar o novo ciclo', next: 36 },
          { text: 'Procurar um modo de equilibrar', next: 37 }
          ]
          },
          { 
          id: 62,
          bg: 'diagramas.png',
          text: ' você o salva ele chora igual a um bebe e jura te proteger mas você recusa e ele corre para a floresta......',
          choices: [
          { text: 'Ir a hospedaria e dormir', next: 1 },
          { text: 'Fugir...', next: 13 }
          ]
          },
          {
          id: 63,
          bg: 'regnuin.png',
          text: ' você vê um bonerius e o rasga com a sua arma vários animais misticos fogem da regnum com necrocristais em suas bocas e braços . Você vê a violencia por busca de poder e por um mundo imortal mas fatal a fauna.. Você perde a conta de quantos você lutou e guarda o rosto de cada um eram mais de 800...',
          choices: [
          { text: 'ir a um lugar aleatorio para descansar', next: 35 },
          { text: 'Buscar uma nava vida', next: 0 }
          ]
          },
          {
          id: 64,
          bg: 'lamina.png',
          text: 'uma lamina aparece em um compartimento em baixo de um terminal ela vibra querendo lutar, você luta para não sentir os outros donos dela te contam as batalhas que eles foram com ela.',
          choices: [
          { text: 'Formar alianças', next: 60 },
          { text: 'Desistir de tudo', next: 0 }
          ]
          },
          {
          id: 65,
          bg: 'favcon.png',
          text: ' a caixa é linda a única coisa que você pararia um milenio inteiro para comtemplar ela e o corração de ferro que te olha e se funde com o seu corpo te transformando na forma mais pura da ira.',
          choices: [
          { text: 'Seguir o plano', next: 63 },
          { text: 'ir descansa na praça', next: 0 }
          ]
          },
          {
          id: 66,
          bg: 'diagramas.png',
          text: 'a gaiola range o animal que ela um boitatá corre para a rua e luta com mais de 5 homems e a população o protege...',
          choices: [
          { text: 'seguir com o plano', next: 63 },
          { text: 'Desistir e pular', next: 0 }
          ]
          },
          {
          id: 67,
          bg: 'glichtfinal.png',
          text: 'você o liberta e ele te agradece ',
          choices: [
          { text: 'Ir andar para esclarecer', next: 34 },
          { text: 'Fugir para a realidade', next: 2 }
          ]
          },
          {
          id: 68,
          bg: 'diagramas.png',
          text: 'você olha para ele chorando sente o seu corpo aquecer era aquele boitata ele deita com você e os dois dormem em um campo frio do sul...',
          choices: [
          { text: 'Seguir o caminho ', next: 1 },
          { text: 'Ignorar e voltar', next: 0 }
          ]
          },
          {
          id: 69,
          bg: 'estranho.png',
          text: 'Eryon, com o Martelo de metalion em punho, desafiou a Regnum no topo da Torre Trêmula, onde o tempo hesitou e o ar cheirava a vapor e destino quebrado...A Rainha-Máquina rugiu mil engrenagens de ódio, mas ele cravou no peito dela o seu machado, feito de dor, carvão e esperança.....No silêncio que seguiu, a faísca venceu o sistema — e a revolução nasceu no eco de um trovão. ',
          choices: [
          { text: 'Explorar outros lugares', next: 1 },
          { text: 'Voltar para a cidade', next: 0 }
          ]
          },
          {
          id: 70,
          bg: 'resistencia.png',
          text: 'Lira aparece com um esquadrão de elite da regnum.Você se lembra que a amava e agora ela que acabou com tudo',
          choices: [
          { text: 'Recomeçar a história', next: 0 }
          ]
          },
          {
          id: 71,
          bg: 'resistencia.png',
          text: 'ele te olha com odio mas aceita te camando de capitão... ele ira lutar com todos que te atacarem .',
          choices: [
          { text: 'desistir', next: 1 },
          { text: 'Aceitar ', next: 63 }
          ]
          },
          {
          id: 72,
          bg: 'resistencia.png',
          text: 'o hakcer aceita..... e abre os portões e desliga os automatos de segurança....',
          choices: [
          { text: 'Continuar a revolução', next: 63 },
          { text: 'Repensar a luta', next: 56 }
          ]
          }
          ];
          
    let currentScene = 0;

    let typewriterTimeouts = [];

function clearTypewriter() {
    typewriterTimeouts.forEach(timeout => clearTimeout(timeout));
    typewriterTimeouts = [];
}

function typeWriter(text, i = 0) {
    if (i === 0) {
        dialogue.textContent = '';
        clearTypewriter(); // Cancela qualquer digitação anterior
    }

    if (i < text.length) {
        dialogue.textContent += text.charAt(i);
        const timeout = setTimeout(() => typeWriter(text, i + 1), 25);
        typewriterTimeouts.push(timeout);
    }
}
function renderScene(index) {
    const scene = scenes[index];
    currentScene = index;

    fadeOut(() => {
        // Troca o fundo
        background.style.backgroundImage = `url('${scene.bg}')`;

        // Limpa escolhas anteriores
        choicesContainer.innerHTML = '';

        // Cria os botões com suporte a ações personalizadas
        scene.choices.forEach(choice => {
            const btn = document.createElement('div');
            btn.className = 'choice';
            btn.textContent = choice.text;

            btn.onclick = () => {
                if (choice.action) {
                    choice.action(); // chama a função personalizada
                } else {
                    renderScene(choice.next); // cena normal
                }
            };

            choicesContainer.appendChild(btn);
        });

        // Aplica o efeito de digitação
        typeWriter(scene.text);

        // Mostra novamente com fade-in
        fadeIn();
    });
}


// Função de fade-out
function fadeOut(callback) {
    gameContainer.style.opacity = 0;
    setTimeout(callback, 500);
}

// Função de fade-in
function fadeIn() {
    gameContainer.style.opacity = 1;
}

// Reiniciar o jogo ao pressionar 'R'
document.addEventListener('keydown', (event) => {
    if (event.key.toLowerCase() === 'r') {
        renderScene(0);
    }
});
let tentativas = 0;

function abrirInputSenha() {
  document.getElementById("senha-container").style.display = "block";
}

function verificarSenha() {
  const input = document.getElementById("entradaSenha").value.trim();
  if (input === "28/10/1812") {
    document.getElementById("senha-container").style.display = "none";
    renderScene(3);
  } else {
    tentativas++;
    if (tentativas >= 3) {
      alert("A fechadura eletrônica se autodestruiu. Você perdeu esse caminho...");
      document.getElementById("senha-container").style.display = "none";
      renderScene(1);
    } else {
      alert("Nada acontece. Algo está errado na data.");
    }
  }
}
let puzzleIndex = 0;
let acertos = 0;

function abrirTerminal() {
  puzzleIndex = 0;
  acertos = 0;
  document.getElementById("terminal").style.display = "block";
  mostrarPuzzle();
}

function mostrarPuzzle() {
  const output = document.getElementById("puzzle-output");
  const input = document.getElementById("puzzle-input");

  output.innerHTML = `<p>${puzzles[puzzleIndex].pergunta}</p>`;
  input.innerHTML = `
    <input type="text" id="respostaPuzzle" placeholder="Digite aqui..." style="padding:5px;">
    <button onclick="verificarPuzzle()">Enviar</button>
  `;
}

function verificarPuzzle() {
  const respostaUsuario = document.getElementById("respostaPuzzle").value.trim().toLowerCase();
  const puzzle = puzzles[puzzleIndex];

  const correta = Array.isArray(puzzle.resposta)
    ? puzzle.resposta.includes(respostaUsuario)
    : respostaUsuario === puzzle.resposta;

  if (correta) {
    acertos++;
    puzzleIndex++;

    if (puzzleIndex >= puzzles.length) {
      document.getElementById("terminal").style.display = "none";

      if (acertos === puzzles.length) {
        alert(">> TODOS os enigmas foram decifrados. O sistema reverencia sua mente. A porta oculta se abre...");
        renderScene(66); // CENA MISTERIOSA FINAL
      } else {
        alert(">> Você concluiu, mas o rastro foi corrompido. Alguma resposta não ecoou com a verdade.");
        renderScene(0); // Volta pro início, final "não verdadeiro"
      }

    } else {
      alert(">> Frequência validada. Avançando para o próximo enigma...");
      mostrarPuzzle();
    }
  } else {
    document.getElementById("terminal").style.display = "none";
    alert(">> Resposta incorreta. A harmonia foi quebrada. O ciclo se encerra.");
    puzzle.falha();
  }
}
      
window.onload = () => renderScene(currentScene);

</script>
</body>
</html>
